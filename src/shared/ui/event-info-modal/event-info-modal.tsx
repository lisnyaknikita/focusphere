import { formatDateRange } from '@/shared/utils/format-date-range/format-date-range'
import { CalendarEvent as SXEvent } from '@schedule-x/calendar'
import classes from './event-info-modal.module.scss'

interface EventInfoModalProps {
	event: SXEvent
	onConfirmDelete?: (eventId: string) => Promise<void> | void
}

export const EventInfoModal = ({ event, onConfirmDelete }: EventInfoModalProps) => {
	const formattedDate = formatDateRange(event.start, event.end)

	const isReadOnly = !onConfirmDelete

	const handleDelete = () => {
		if (onConfirmDelete) {
			onConfirmDelete(String(event.id))
		}
	}

	return (
		<div className={classes.modalInner}>
			<div className={classes.modalButtons}>
				{!isReadOnly && (
					<>
						<button className={classes.editButton}>
							<svg fill='none' viewBox='0 0 19 23' xmlns='http://www.w3.org/2000/svg'>
								<path
									d='m14.473 5.0741c-0.3682-0.30848-0.8438-0.45823-1.3223-0.41637-0.4786 0.04187-0.9209 0.27193-1.23 0.63966l-8.0978 9.6505 0.22329 2.5522 2.5523-0.2233 8.0978-9.6505c0.3084-0.36826 0.458-0.84381 0.4162-1.3223-0.0419-0.47848-0.2719-0.92082-0.6395-1.2299zm-8.3721 11.242-1.1456 0.1003-0.10023-1.1457 6.0502-7.2047 1.2459 1.0454-6.0502 7.2047zm7.8295-9.3328-1.1395 1.358-1.2434-1.0456 1.1392-1.3559c0.1386-0.16521 0.3372-0.26858 0.552-0.28738 0.2149-0.0188 0.4284 0.04852 0.5936 0.18715s0.2686 0.33721 0.2874 0.55205c0.0188 0.21485-0.0485 0.42836-0.1872 0.59357l-0.0021-0.00182z'
									fill='var(--text)'
								/>
							</svg>
						</button>
						<button className={classes.deleteButton} onClick={handleDelete}>
							<svg width='18' height='18' viewBox='0 0 14 14' fill='none' xmlns='http://www.w3.org/2000/svg'>
								<path
									d='M12.2493 2.33333H10.441C10.3056 1.67499 9.94741 1.08345 9.42675 0.658419C8.90608 0.233386 8.2548 0.000848473 7.58268 0L6.41602 0C5.7439 0.000848473 5.09262 0.233386 4.57195 0.658419C4.05129 1.08345 3.69307 1.67499 3.55768 2.33333H1.74935C1.59464 2.33333 1.44627 2.39479 1.33687 2.50419C1.22747 2.61358 1.16602 2.76196 1.16602 2.91667C1.16602 3.07138 1.22747 3.21975 1.33687 3.32915C1.44627 3.43854 1.59464 3.5 1.74935 3.5H2.33268V11.0833C2.33361 11.8566 2.6412 12.5979 3.18798 13.1447C3.73476 13.6915 4.47609 13.9991 5.24935 14H8.74935C9.52261 13.9991 10.2639 13.6915 10.8107 13.1447C11.3575 12.5979 11.6651 11.8566 11.666 11.0833V3.5H12.2493C12.4041 3.5 12.5524 3.43854 12.6618 3.32915C12.7712 3.21975 12.8327 3.07138 12.8327 2.91667C12.8327 2.76196 12.7712 2.61358 12.6618 2.50419C12.5524 2.39479 12.4041 2.33333 12.2493 2.33333ZM6.41602 1.16667H7.58268C7.94451 1.16711 8.29734 1.27947 8.59279 1.48834C8.88824 1.69721 9.11184 1.99237 9.23293 2.33333H4.76577C4.88686 1.99237 5.11046 1.69721 5.40591 1.48834C5.70136 1.27947 6.05419 1.16711 6.41602 1.16667ZM10.4993 11.0833C10.4993 11.5475 10.315 11.9926 9.98679 12.3208C9.6586 12.649 9.21348 12.8333 8.74935 12.8333H5.24935C4.78522 12.8333 4.3401 12.649 4.01191 12.3208C3.68372 11.9926 3.49935 11.5475 3.49935 11.0833V3.5H10.4993V11.0833Z'
									fill='var(--text)'
								/>
								<path
									d='M5.83333 10.5002C5.98804 10.5002 6.13642 10.4387 6.24581 10.3293C6.35521 10.2199 6.41667 10.0715 6.41667 9.91683V6.41683C6.41667 6.26212 6.35521 6.11375 6.24581 6.00435C6.13642 5.89495 5.98804 5.8335 5.83333 5.8335C5.67862 5.8335 5.53025 5.89495 5.42085 6.00435C5.31146 6.11375 5.25 6.26212 5.25 6.41683V9.91683C5.25 10.0715 5.31146 10.2199 5.42085 10.3293C5.53025 10.4387 5.67862 10.5002 5.83333 10.5002Z'
									fill='var(--text)'
								/>
								<path
									d='M8.16732 10.5002C8.32203 10.5002 8.4704 10.4387 8.5798 10.3293C8.68919 10.2199 8.75065 10.0715 8.75065 9.91683V6.41683C8.75065 6.26212 8.68919 6.11375 8.5798 6.00435C8.4704 5.89495 8.32203 5.8335 8.16732 5.8335C8.01261 5.8335 7.86424 5.89495 7.75484 6.00435C7.64544 6.11375 7.58398 6.26212 7.58398 6.41683V9.91683C7.58398 10.0715 7.64544 10.2199 7.75484 10.3293C7.86424 10.4387 8.01261 10.5002 8.16732 10.5002Z'
									fill='var(--text)'
								/>
							</svg>
						</button>
					</>
				)}
			</div>
			<div className={classes.modalContent}>
				<div className={classes.title}>
					<span style={{ backgroundColor: `${event.color}` }}></span>
					<h6>{event.title}</h6>
				</div>
				<div className={classes.date}>
					<span>
						<svg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'>
							<g clipPath='url(#clip0_2409_2174)'>
								<path
									d='M12.6667 1.33333H12V0.666667C12 0.489856 11.9298 0.320286 11.8047 0.195262C11.6797 0.0702379 11.5101 0 11.3333 0C11.1565 0 10.987 0.0702379 10.8619 0.195262C10.7369 0.320286 10.6667 0.489856 10.6667 0.666667V1.33333H5.33333V0.666667C5.33333 0.489856 5.2631 0.320286 5.13807 0.195262C5.01305 0.0702379 4.84348 0 4.66667 0C4.48986 0 4.32029 0.0702379 4.19526 0.195262C4.07024 0.320286 4 0.489856 4 0.666667V1.33333H3.33333C2.4496 1.33439 1.60237 1.68592 0.97748 2.31081C0.352588 2.93571 0.00105857 3.78294 0 4.66667L0 12.6667C0.00105857 13.5504 0.352588 14.3976 0.97748 15.0225C1.60237 15.6474 2.4496 15.9989 3.33333 16H12.6667C13.5504 15.9989 14.3976 15.6474 15.0225 15.0225C15.6474 14.3976 15.9989 13.5504 16 12.6667V4.66667C15.9989 3.78294 15.6474 2.93571 15.0225 2.31081C14.3976 1.68592 13.5504 1.33439 12.6667 1.33333ZM1.33333 4.66667C1.33333 4.13623 1.54405 3.62753 1.91912 3.25245C2.29419 2.87738 2.8029 2.66667 3.33333 2.66667H12.6667C13.1971 2.66667 13.7058 2.87738 14.0809 3.25245C14.456 3.62753 14.6667 4.13623 14.6667 4.66667V5.33333H1.33333V4.66667ZM12.6667 14.6667H3.33333C2.8029 14.6667 2.29419 14.456 1.91912 14.0809C1.54405 13.7058 1.33333 13.1971 1.33333 12.6667V6.66667H14.6667V12.6667C14.6667 13.1971 14.456 13.7058 14.0809 14.0809C13.7058 14.456 13.1971 14.6667 12.6667 14.6667Z'
									fill='var(--text)'
								/>
								<path
									d='M8 11C8.55228 11 9 10.5523 9 10C9 9.44772 8.55228 9 8 9C7.44772 9 7 9.44772 7 10C7 10.5523 7.44772 11 8 11Z'
									fill='var(--text)'
								/>
								<path
									d='M4.66602 11C5.2183 11 5.66602 10.5523 5.66602 10C5.66602 9.44772 5.2183 9 4.66602 9C4.11373 9 3.66602 9.44772 3.66602 10C3.66602 10.5523 4.11373 11 4.66602 11Z'
									fill='var(--text)'
								/>
								<path
									d='M11.334 11C11.8863 11 12.334 10.5523 12.334 10C12.334 9.44772 11.8863 9 11.334 9C10.7817 9 10.334 9.44772 10.334 10C10.334 10.5523 10.7817 11 11.334 11Z'
									fill='var(--text)'
								/>
							</g>
							<defs>
								<clipPath id='clip0_2409_2174'>
									<rect width='16' height='16' fill='var(--text)' />
								</clipPath>
							</defs>
						</svg>
					</span>
					<p>{formattedDate}</p>
				</div>
				{event.description && event.description.trim() !== '' && (
					<div className={classes.description}>
						<span>
							<svg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'>
								<path
									d='M13.3333 0H2.66667C1.95942 0 1.28115 0.280952 0.781049 0.781049C0.280952 1.28115 0 1.95942 0 2.66667L0 10.6667C0 11.3739 0.280952 12.0522 0.781049 12.5523C1.28115 13.0524 1.95942 13.3333 2.66667 13.3333H4.6L7.56733 15.842C7.68771 15.9439 7.8403 15.9998 7.998 15.9998C8.1557 15.9998 8.30829 15.9439 8.42867 15.842L11.4 13.3333H13.3333C14.0406 13.3333 14.7189 13.0524 15.219 12.5523C15.719 12.0522 16 11.3739 16 10.6667V2.66667C16 1.95942 15.719 1.28115 15.219 0.781049C14.7189 0.280952 14.0406 0 13.3333 0ZM14.6667 10.6667C14.6667 11.0203 14.5262 11.3594 14.2761 11.6095C14.0261 11.8595 13.687 12 13.3333 12H11.4C11.0849 12.0001 10.7799 12.1118 10.5393 12.3153L8 14.46L5.462 12.3153C5.22104 12.1115 4.9156 11.9998 4.6 12H2.66667C2.31304 12 1.97391 11.8595 1.72386 11.6095C1.47381 11.3594 1.33333 11.0203 1.33333 10.6667V2.66667C1.33333 2.31304 1.47381 1.97391 1.72386 1.72386C1.97391 1.47381 2.31304 1.33333 2.66667 1.33333H13.3333C13.687 1.33333 14.0261 1.47381 14.2761 1.72386C14.5262 1.97391 14.6667 2.31304 14.6667 2.66667V10.6667Z'
									fill='var(--text)'
								/>
								<path
									d='M4.66667 4.66659H8C8.17681 4.66659 8.34638 4.59635 8.4714 4.47132C8.59643 4.3463 8.66667 4.17673 8.66667 3.99992C8.66667 3.82311 8.59643 3.65354 8.4714 3.52851C8.34638 3.40349 8.17681 3.33325 8 3.33325H4.66667C4.48986 3.33325 4.32029 3.40349 4.19526 3.52851C4.07024 3.65354 4 3.82311 4 3.99992C4 4.17673 4.07024 4.3463 4.19526 4.47132C4.32029 4.59635 4.48986 4.66659 4.66667 4.66659Z'
									fill='var(--text)'
								/>
								<path
									d='M11.3333 6H4.66667C4.48986 6 4.32029 6.07024 4.19526 6.19526C4.07024 6.32029 4 6.48986 4 6.66667C4 6.84348 4.07024 7.01305 4.19526 7.13807C4.32029 7.2631 4.48986 7.33333 4.66667 7.33333H11.3333C11.5101 7.33333 11.6797 7.2631 11.8047 7.13807C11.9298 7.01305 12 6.84348 12 6.66667C12 6.48986 11.9298 6.32029 11.8047 6.19526C11.6797 6.07024 11.5101 6 11.3333 6Z'
									fill='var(--text)'
								/>
								<path
									d='M11.3333 8.66675H4.66667C4.48986 8.66675 4.32029 8.73699 4.19526 8.86201C4.07024 8.98703 4 9.1566 4 9.33341C4 9.51023 4.07024 9.67979 4.19526 9.80482C4.32029 9.92984 4.48986 10.0001 4.66667 10.0001H11.3333C11.5101 10.0001 11.6797 9.92984 11.8047 9.80482C11.9298 9.67979 12 9.51023 12 9.33341C12 9.1566 11.9298 8.98703 11.8047 8.86201C11.6797 8.73699 11.5101 8.66675 11.3333 8.66675Z'
									fill='var(--text)'
								/>
							</svg>
						</span>
						<p>{event.description}</p>
					</div>
				)}
			</div>
		</div>
	)
}
